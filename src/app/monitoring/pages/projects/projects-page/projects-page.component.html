<div class="content-body">
  <!-- Breadcrumb  -->
  <app-breadcrumb [breadcrumb]="breadcrumbList"> </app-breadcrumb>
  <div class="container-fluid">
      <div class="row">
          <div class="col-xxl-3 col-xl-4">
              <div class="card h-auto">
                  <div class="card-header">
                      <h4 class="heading mb-0">Add New Project </h4>
                  </div>
                  <div class="card-body">
                      <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="finance-hr">
                        <div class="form-group mb-3">
                            <label class="text-secondary"> Project Id<span class="text-danger">*</span>
                          </label>
                          <input type="text" class="form-control"  formControlName="projectId" >
                          <small class="text-danger" *ngIf="projectForm.get('projectId')?.invalid && projectForm.get('projectId')?.touched">
                            Project ID is required and must be greater than 0.
                          </small>
                        </div>
                          <div class="form-group mb-3">
                              <label class="text-secondary font-w500"> Project Name<span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" formControlName="projectName">
                            <small class="text-danger" *ngIf="projectForm.get('projectName')?.invalid && projectForm.get('projectName')?.touched">
                              Project Name is required (min 3 characters).
                            </small>
                          </div>

                          <div class="form-group mb-3">
                              <label class="text-secondary">Project Description<span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" formControlName="projectDescription">
                            <small class="text-danger" *ngIf="projectForm.get('projectDescription')?.invalid && projectForm.get('projectDescription')?.touched">
                              Description must be at least 5 characters.
                            </small>
                          </div>
                          <button type="submit" class="btn btn-primary mb-3">Save Project</button>
                      </form>
                  </div>
              </div>
          </div>
          <div class="col-xxl-9 col-xl-8">
              <div class="card">
                  <div class="card-body p-0">
                      <div class="table-responsive active-projects manage-client dataTables_wrapper">
                          <div class="tbl-caption">
                              <h4 class="heading mb-0">Finance</h4>
                          </div>
                          <!-- (matSortChange)="sortData($event)" -->
                          <table matSort  id="empoloyees-tbl1" class="table">
                              <thead>
                                  <tr>
                                      <th mat-sort-header="project_id">Project Id</th>
                                      <th mat-sort-header="project_name">Project Name</th>
                                      <th mat-sort-header="project_description">Project No</th>
                                      <th mat-sort-header="project_users">Users </th>

                                  </tr>
                              </thead>
                              <tbody>
                                  @for(item of allData.data; track item){
                                  <tr>
                                      <td>
                                          <span>{{ item.projectId }}</span>
                                      </td>

                                      <td>
                                          <span>{{ item.projectName }}</span>
                                      </td>
                                      <td>
                                          <span>{{ item.projectDescription }}</span>
                                      </td>
                                      <td>
                                          <span>{{ item.responsibleUserIds.length }}</span>
                                      </td>
                                  </tr>
                                  }
                              </tbody>
                          </table>
                          <div class="dataTables_info" id="example5_info" role="status" aria-live="polite">Showing {{page}} to
                              {{totalRows}} of {{ allData.total }} entries</div>
                          <div class="dataTables_paginate paging_simple_numbers pt-2">
                          <app-pagination [totalPage]="totalPage" [page]="page" (newPage)="pageChange($event)"></app-pagination>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
